<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Gurukulam - Learn Telugu, Sanskrit, and Indian Heritage Stories</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f4f1eb 0%, #fdf6e7 50%, #f0e6d6 100%);
            min-height: 100vh;
            color: #5d4e37;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background elements with warm earth tones */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(205,133,63,0.08)"/><circle cx="80" cy="40" r="1" fill="rgba(139,69,19,0.1)"/><circle cx="40" cy="80" r="3" fill="rgba(222,184,135,0.06)"/><circle cx="90" cy="90" r="1.5" fill="rgba(160,82,45,0.08)"/></svg>');
            animation: float 20s infinite linear;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes float {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: #8b4513;
            animation: slideInDown 0.8s ease-out;
        }

        @keyframes slideInDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(139,69,19,0.3);
            background: linear-gradient(45deg, #cd853f, #deb887, #a0522d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.8;
            animation: fadeIn 1s ease-out 0.5s both;
            color: #8b7355;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 0.8; }
        }

        .app-card {
            background: rgba(255, 251, 240, 0.95);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(205,133,63,0.15);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(222,184,135,0.3);
            animation: slideInUp 0.8s ease-out 0.3s both;
            position: relative;
            overflow: hidden;
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(222,184,135,0.15), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 12px 24px;
            border: 2px solid #cd853f;
            background: transparent;
            color: #cd853f;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #cd853f 0%, #deb887 100%);
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(205,133,63,0.3);
        }

        .language-selector {
            text-align: center;
            margin-bottom: 30px;
        }

        .language-selector label {
            font-size: 1.1em;
            font-weight: 600;
            color: #8b4513;
            margin-bottom: 15px;
            display: block;
        }

        select {
            padding: 15px 25px;
            font-size: 16px;
            border: 2px solid #cd853f;
            border-radius: 15px;
            background: linear-gradient(135deg, #fffbf0 0%, #fdf6e7 100%);
            cursor: pointer;
            transition: all 0.4s ease;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(205,133,63,0.1);
            color: #8b4513;
        }

        select:hover {
            border-color: #a0522d;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(160,82,45,0.2);
        }

        select:focus {
            outline: none;
            border-color: #a0522d;
            box-shadow: 0 0 0 4px rgba(160,82,45,0.1);
        }

        .lesson-area {
            text-align: center;
            margin-bottom: 30px;
        }

        .word-card {
            background: linear-gradient(135deg, #cd853f 0%, #deb887 50%, #f5deb3 100%);
            color: #4a3429;
            padding: 50px 30px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 15px 35px rgba(205,133,63,0.2);
            transform: translateY(0);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .word-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .word-card:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow: 0 20px 45px rgba(205,133,63,0.3);
        }

        .word-card-content {
            position: relative;
            z-index: 2;
            background: rgba(255,255,255,0.9);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(222,184,135,0.3);
        }

        .foreign-word {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(139,69,19,0.2);
            animation: pulse 2s infinite;
            color: #8b4513;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .pronunciation {
            font-size: 1.4em;
            opacity: 0.8;
            font-style: italic;
            margin-bottom: 10px;
            background: rgba(205,133,63,0.15);
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            color: #8b4513;
        }

        .phonetic-guide {
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 5px;
            color: #a0522d;
            font-weight: 600;
        }

        .english-word {
            font-size: 1.6em;
            margin-top: 20px;
            opacity: 0.9;
            font-weight: 600;
            padding: 15px;
            background: rgba(160,82,45,0.1);
            border-radius: 15px;
            color: #8b4513;
        }

        .cultural-context {
            font-size: 1em;
            margin-top: 15px;
            padding: 15px;
            background: rgba(245,222,179,0.3);
            border-radius: 10px;
            color: #8b4513;
            font-style: italic;
            border-left: 4px solid #cd853f;
            text-align: left;
        }

        .word-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.9);
            color: #cd853f;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .next-word-btn {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(255,255,255,0.9);
            border: 2px solid #cd853f;
            color: #cd853f;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .next-word-btn:hover {
            background: #cd853f;
            color: white;
            transform: scale(1.1);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transition: all 0.4s ease;
            transform: translate(-50%, -50%);
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #cd853f 0%, #deb887 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(205,133,63,0.2);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #fffbf0 0%, #fdf6e7 100%);
            color: #8b4513;
            box-shadow: 0 8px 20px rgba(139,69,19,0.1);
            border: 2px solid #cd853f;
        }

        .btn-success {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(160,82,45,0.2);
        }

        .btn-accent {
            background: linear-gradient(135deg, #f5deb3 0%, #deb887 100%);
            color: #8b4513;
            border: 2px solid #cd853f;
            box-shadow: 0 8px 20px rgba(205,133,63,0.1);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        button:active {
            transform: translateY(-1px);
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
            color: #8b7355;
        }

        .speed-slider {
            -webkit-appearance: none;
            width: 150px;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, #cd853f, #a0522d);
            outline: none;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid #cd853f;
            cursor: pointer;
        }

        .quiz-area, .story-area {
            margin-top: 30px;
            padding: 35px;
            background: linear-gradient(135deg, rgba(255,251,240,0.9) 0%, rgba(245,222,179,0.3) 100%);
            border-radius: 20px;
            border: 2px dashed #cd853f;
            backdrop-filter: blur(10px);
        }

        .quiz-question {
            font-size: 1.4em;
            margin-bottom: 25px;
            color: #8b4513;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            border: 2px solid #cd853f;
            border-radius: 15px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: rgba(255,251,240,0.9);
            color: #8b4513;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #a0522d;
            box-shadow: 0 0 0 4px rgba(160,82,45,0.1);
            transform: translateY(-2px);
        }

        .progress-container {
            margin: 25px 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(205,133,63,0.2);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #cd853f 0%, #deb887 50%, #a0522d 100%);
            width: 0%;
            transition: width 0.8s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.5) 50%, transparent 100%);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 35px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,251,240,0.9) 0%, rgba(245,222,179,0.7) 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            color: #8b4513;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(222,184,135,0.3);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            border-color: #a0522d;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
            background: linear-gradient(45deg, #cd853f, #a0522d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
            font-weight: 600;
            color: #8b7355;
        }

        .feedback {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            opacity: 0;
            transition: all 0.4s ease;
            transform: translateY(10px);
        }

        .feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback.correct {
            background: linear-gradient(135deg, #f0fff0 0%, #d4f1d4 100%);
            color: #2d5016;
            border: 2px solid #9acd32;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            color: #a0522d;
            border: 2px solid #cd853f;
        }

        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 8px 16px;
            border: 2px solid #cd853f;
            background: transparent;
            color: #cd853f;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
        }

        .difficulty-btn.active {
            background: linear-gradient(135deg, #cd853f, #deb887);
            color: white;
            border-color: #cd853f;
        }

        .story-content {
            font-size: 1.1em;
            line-height: 1.8;
            color: #5d4e37;
            margin-bottom: 20px;
            text-align: left;
        }

        .story-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #cd853f;
            margin-bottom: 20px;
            text-align: center;
        }

        .story-moral {
            background: rgba(160,82,45,0.1);
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid #a0522d;
            font-style: italic;
            color: #8b4513;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .achievement-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #cd853f, #deb887);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            transform: translateX(300px);
            transition: transform 0.5s ease;
            z-index: 1000;
        }

        .achievement-badge.show {
            transform: translateX(0);
        }

        @media (max-width: 700px) {
            .container {
                padding: 15px;
            }
            
            .app-card {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .foreign-word {
                font-size: 2.2em;
            }
            
            .controls, .mode-selector, .difficulty-selector {
                flex-direction: column;
                align-items: center;
            }

            button {
                width: 80%;
                max-width: 300px;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .next-word-btn {
                bottom: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <div class="achievement-badge" id="achievementBadge">üéâ Well Done!</div>
    
    <div class="container">
        <header>
            <h1>üèõÔ∏è Digital Gurukulam</h1>
            <p class="subtitle">Learn Telugu, Sanskrit and Indian Heritage Stories</p>
        </header>

        <div class="app-card">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="learn">üìö Learn</button>
                <button class="mode-btn" data-mode="quiz">üß† Quiz</button>
                <button class="mode-btn" data-mode="story">üìñ Stories</button>
            </div>

            <div id="learnMode">
                <div class="language-selector">
                    <label for="language">Choose your language:</label>
                    <select id="language">
                        <option value="telugu">üáÆüá≥ Telugu</option>
                        <option value="sanskrit">üïâÔ∏è Sanskrit</option>
                    </select>
                </div>

                <div class="difficulty-selector">
                    <button class="difficulty-btn active" data-level="beginner">üå± Beginner</button>
                    <button class="difficulty-btn" data-level="intermediate">üåø Intermediate</button>
                    <button class="difficulty-btn" data-level="advanced">üå≥ Advanced</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>
                </div>

                <div class="lesson-area">
                    <div class="word-card" id="wordCard">
                        <div class="word-category" id="wordCategory">Greetings</div>
                        <button class="next-word-btn" onclick="nextWord()" title="Next Word">‚Üí</button>
                        <div class="word-card-content">
                            <div class="foreign-word" id="foreignWord">‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç</div>
                            <div class="pronunciation" id="pronunciation">[na-mas-kaa-ram]</div>
                            <div class="phonetic-guide" id="phoneticGuide">Break it down: na¬∑mas¬∑kaa¬∑ram</div>
                            <div class="english-word" id="englishWord" style="display: none;">Hello/Greetings</div>
                            <div class="cultural-context" id="culturalContext" style="display: none;">
                                A respectful greeting combining 'namas' (bow) and 'karam' (doing), expressing reverence and humility in traditional Indian culture.
                            </div>
                        </div>
                    </div>

                    <div class="speed-control">
                        <span>üêå Slow</span>
                        <input type="range" id="speedSlider" class="speed-slider" min="0.3" max="1.2" step="0.1" value="0.7">
                        <span>üöÄ Fast</span>
                    </div>

                    <div class="controls">
                        <button class="btn-primary" onclick="speakWord()">üîä Listen</button>
                        <button class="btn-accent" onclick="speakSlow()">üêå Slow Speech</button>
                        <button class="btn-secondary" onclick="showTranslation()">üëÅÔ∏è Show Translation</button>
                        <button class="btn-success" onclick="nextWord()">‚û°Ô∏è Next Word</button>
                        <button class="btn-accent" onclick="showCulturalContext()">üèõÔ∏è Cultural Context</button>
                    </div>
                </div>
            </div>

            <div id="quizMode" class="hidden">
                <div class="quiz-area">
                    <div class="quiz-question" id="quizQuestion">What does "‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç" mean in English?</div>
                    <input type="text" id="answerInput" placeholder="Type your answer here...">
                    <button class="btn-primary" onclick="checkAnswer()">‚ú® Check Answer</button>
                    <div class="feedback" id="feedback"></div>
                </div>
            </div>

            <div id="storyMode" class="hidden">
                <div class="story-area">
                    <div class="story-title" id="storyTitle">The Wise Sage and the Arrogant Scholar</div>
                    <div class="story-content" id="storyContent">
                        Once upon a time, there was a great sage who lived in a simple ashram in the foothills of the Himalayas. A proud scholar visited him, speaking in complex Sanskrit verses to show his vast knowledge. The sage listened quietly, then offered him water in a broken clay pot. 
                        
                        The scholar refused, saying "I cannot drink from such a humble vessel." The sage smiled and said, "Knowledge, like water, takes the shape of its container. If the container is filled with pride, even the purest knowledge becomes bitter."
                        
                        The scholar realized his arrogance and bowed before the sage, asking to be his student.
                    </div>
                    <div class="story-moral">
                        <strong>Moral:</strong> True wisdom lies in humility. Knowledge without humility is like a lamp without oil - it cannot give light to others. As the ancient saying goes: "‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§¶‡§¶‡§æ‡§§‡§ø ‡§µ‡§ø‡§®‡§Ø‡§Ç" - Knowledge bestows humility.
                    </div>
                    <div class="controls">
                        <button class="btn-primary" onclick="nextStory()">üìñ Next Story</button>
                        <button class="btn-secondary" onclick="speakStory()">üîä Narrate Story</button>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn-secondary" onclick="toggleAutoplay()">‚èØÔ∏è Auto Play</button>
                <button class="btn-accent" onclick="resetProgress()">üîÑ Reset Progress</button>
                <button class="btn-success" onclick="exportProgress()">üíæ Save Progress</button>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <span class="stat-number" id="wordsLearned">0</span>
                    <span class="stat-label">Words Learned</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="correctAnswers">0</span>
                    <span class="stat-label">Correct Answers</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="streak">0</span>
                    <span class="stat-label">Current Streak</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="accuracy">0%</span>
                    <span class="stat-label">Accuracy</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Complete vocabulary data with all languages and levels
        const vocabularyData = {
            telugu: {
                beginner: [
                    {word: "‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç", pronunciation: "[na-mas-kaa-ram]", phonetic: "na¬∑mas¬∑kaa¬∑ram", translation: "Hello/Greetings", category: "Greetings", romanized: "namaskaaram", ipa: "/n åm åskaÀêr åm/", context: "A respectful greeting combining 'namas' (bow) and 'karam' (doing), expressing reverence and humility in traditional Indian culture."},
                    {word: "‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å", pronunciation: "[dhan-ya-vaa-daa-lu]", phonetic: "dhan¬∑ya¬∑vaa¬∑daa¬∑lu", translation: "Thank you", category: "Politeness", romanized: "dhanyavaadaalu", ipa: "/dÃ™ ∞ ånÃ™j åvaÀêdÃ™aÀêlu/", context: "Expresses gratitude; 'dhanya' means blessed, showing appreciation makes one blessed."},
                    {word: "‡∞µ‡±Ä‡∞°‡±ç‡∞ï‡±ã‡∞≤‡±Å", pronunciation: "[veed-ko-lu]", phonetic: "veed¬∑ko¬∑lu", translation: "Goodbye", category: "Greetings", romanized: "veedkolu", ipa: "/viÀê…ñkoÀêlu/", context: "A formal farewell wishing well-being until the next meeting."},
                    {word: "‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø", pronunciation: "[da-ya-chey-si]", phonetic: "da¬∑ya¬∑chey¬∑si", translation: "Please", category: "Politeness", romanized: "dayachesi", ipa: "/dÃ™ åj åtÕ° ÉeÀêsi/", context: "Shows respect when making requests; literally means 'with kindness'."},
                    {word: "‡∞ï‡±ç‡∞∑‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø", pronunciation: "[ksha-min-chan-di]", phonetic: "ksha¬∑min¬∑chan¬∑di", translation: "Sorry/Excuse me", category: "Politeness", romanized: "kshaminchandii", ipa: "/k Ç åmintÕ° É åndi/", context: "Used for apologies and to politely get attention."},
                    {word: "‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å", pronunciation: "[neel-lu]", phonetic: "neel¬∑lu", translation: "Water", category: "Basic Needs", romanized: "neellu", ipa: "/niÀê…≠u/", context: "Essential for life; in Telugu culture, offering water to guests is a sacred duty."},
                    {word: "‡∞Ö‡∞®‡±ç‡∞®‡∞Ç", pronunciation: "[an-nam]", phonetic: "an¬∑nam", translation: "Rice/Food", category: "Food", romanized: "annam", ipa: "/ ånn åm/", context: "Rice is the staple food; 'annam' also means food in general, considered sacred."},
                    {word: "‡∞á‡∞≤‡±ç‡∞≤‡±Å", pronunciation: "[il-lu]", phonetic: "il¬∑lu", translation: "House", category: "Places", romanized: "illu", ipa: "/illu/", context: "Home is considered sacred in Indian culture, where family bonds are strongest."}
                ],
                intermediate: [
                    {word: "‡∞™‡±ç‡∞∞‡±á‡∞Æ", pronunciation: "[prey-ma]", phonetic: "prey¬∑ma", translation: "Love", category: "Emotions", romanized: "prema", ipa: "/preÀêm å/", context: "Pure, unconditional love; also divine love in spiritual contexts."},
                    {word: "‡∞∏‡∞Æ‡∞Ø‡∞Ç", pronunciation: "[sa-ma-yam]", phonetic: "sa¬∑ma¬∑yam", translation: "Time", category: "Concepts", romanized: "samayam", ipa: "/s åm åj åm/", context: "Time is considered precious in Indian philosophy; 'time and tide wait for none'."},
                    {word: "‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨‡∞Ç", pronunciation: "[ku-tum-bam]", phonetic: "ku¬∑tum¬∑bam", translation: "Family", category: "People", romanized: "kutumbam", ipa: "/ku àumb åm/", context: "Family is the foundation of Indian society; includes extended family members."},
                    {word: "‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø", pronunciation: "[vid-yaar-thi]", phonetic: "vid¬∑yaar¬∑thi", translation: "Student", category: "Education", romanized: "vidyaarthi", ipa: "/vidÃ™jaÀêrtÃ™ ∞i/", context: "One who seeks knowledge; students are highly respected in Indian tradition."},
                    {word: "‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞°‡±Å", pronunciation: "[u-paa-dhyaa-yu-du]", phonetic: "u¬∑paa¬∑dhyaa¬∑yu¬∑du", translation: "Teacher", category: "Education", romanized: "upaadhyaayudu", ipa: "/upaÀêdÃ™ ∞jaÀêju…ñu/", context: "Teachers are revered as gurus; 'Guru Brahma Guru Vishnu' - teachers are divine."},
                    {word: "‡∞µ‡±à‡∞¶‡•ç‡§Ø‡•Å‡§°‡±Å", pronunciation: "[vai-dyu-du]", phonetic: "vai¬∑dyu¬∑du", translation: "Doctor", category: "Professions", romanized: "vaidyudu", ipa: "/vaidÃ™ju…ñu/", context: "Healers are respected; Ayurveda is the traditional Indian medical system."},
                    {word: "‡∞™‡±Å‡∞∏‡•ç‡§§‡§ï‡§Æ‡•ç", pronunciation: "[pus-ta-kam]", phonetic: "pus¬∑ta¬∑kam", translation: "Book", category: "Education", romanized: "pustakam", ipa: "/pust åk åm/", context: "Books are treated with reverence; before reading, one pays respects to Saraswati."},
                    {word: "‡∞∏‡∞Ç‡§ó‡±Ä‡∞§‡∞Ç", pronunciation: "[san-gee-tam]", phonetic: "san¬∑gee¬∑tam", translation: "Music", category: "Arts", romanized: "sangeetam", ipa: "/s ångiÀêtÃ™ åm/", context: "Music is divine; classical Indian music is considered a path to moksha."}
                ],
                advanced: [
                    {word: "‡∞Ö‡∞≠‡∞ø‡∞™‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç", pronunciation: "[a-bhi-praa-yam]", phonetic: "a¬∑bhi¬∑praa¬∑yam", translation: "Opinion", category: "Abstract", romanized: "abhipraayam", ipa: "/ åb ∞ipraÀêj åm/", context: "Personal viewpoint; in discussions, all opinions are valued in Indian tradition."},
                    {word: "‡∞∏‡∞æ‡∞Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï", pronunciation: "[saan-skru-ti-ka]", phonetic: "saan¬∑skru¬∑ti¬∑ka", translation: "Cultural", category: "Society", romanized: "saanskrutika", ipa: "/saÀênsk…æutÃ™ik å/", context: "Related to culture and traditions passed down through generations."},
                    {word: "‡∞µ‡•ç‡∞Ø‡§æ‡§™‡§æ‡§∞‡∞Ç", pronunciation: "[vyaa-paa-ram]", phonetic: "vyaa¬∑paa¬∑ram", translation: "Business", category: "Economy", romanized: "vyaapaaram", ipa: "/vjaÀêpaÀêr åm/", context: "Trade and commerce; India has ancient trade traditions with the world."},
                    {word: "‡∞∞‡∞æ‡∞ú‡§ï‡±Ä‡§Ø‡∞Ç", pronunciation: "[raa-ja-kee-yam]", phonetic: "raa¬∑ja¬∑kee¬∑yam", translation: "Politics", category: "Government", romanized: "raajakeyam", ipa: "/raÀêdÕ° í åkiÀêj åm/", context: "Governance; ancient Indian texts like Arthashastra discuss political science."},
                    {word: "‡∞™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡§Æ‡•ç", pronunciation: "[par-yaa-va-ra-nam]", phonetic: "par¬∑yaa¬∑va¬∑ra¬∑nam", translation: "Environment", category: "Nature", romanized: "paryaavaranam", ipa: "/p årjaÀêv år å…≥ åm/", context: "Nature worship is central to Indian philosophy; 'Vasudhaiva Kutumbakam'."},
                    {word: "‡∞∏‡∞æ‡∞Ç‡¶ï‡±á‡∞§‡§ø‡§ï‡§§‡§æ", pronunciation: "[saan-key-ti-ka-ta]", phonetic: "saan¬∑key¬∑ti¬∑ka¬∑ta", translation: "Technology", category: "Modern", romanized: "saanketikta", ipa: "/saÀênkeÀêtÃ™ik åtÃ™ å/", context: "Modern technology blending with ancient wisdom and traditions."}
                ]
            },
            sanskrit: {
                beginner: [
                    {word: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á", pronunciation: "[na-mas-te]", phonetic: "na¬∑mas¬∑te", translation: "Hello/Greetings", category: "Greetings", romanized: "namaste", ipa: "/n åm…ôsteÀê/", context: "Sacred greeting meaning 'I bow to you'; acknowledges the divine in another person."},
                    {word: "‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶", pronunciation: "[dhan-ya-vaad]", phonetic: "dhan¬∑ya¬∑vaad", translation: "Thank you", category: "Politeness", romanized: "dhanyavaad", ipa: "/dÃ™ ∞ ånj…ôvaÀêdÃ™/", context: "Expressing gratitude; 'dhanya' means blessed, fortunate."},
                    {word: "‡§µ‡§ø‡§¶‡§æ‡§à", pronunciation: "[vi-daa-ee]", phonetic: "vi¬∑daa¬∑ee", translation: "Farewell", category: "Greetings", romanized: "vidaayee", ipa: "/vidÃ™aÀêiÀê/", context: "Respectful goodbye; often accompanied by blessings."},
                    {word: "‡§ï‡•É‡§™‡§Ø‡§æ", pronunciation: "[kri-pa-ya]", phonetic: "kri¬∑pa¬∑ya", translation: "Please", category: "Politeness", romanized: "kripaya", ipa: "/k…æip…ôj…ô/", context: "Request with humility; 'kripa' means grace, mercy."},
                    {word: "‡§ï‡•ç‡§∑‡§Æ‡§æ", pronunciation: "[ksha-ma]", phonetic: "ksha¬∑ma", translation: "Forgiveness", category: "Politeness", romanized: "kshama", ipa: "/k Ç…ômaÀê/", context: "One of divine qualities; forgiveness is strength, not weakness."},
                    {word: "‡§ú‡§≤", pronunciation: "[ja-la]", phonetic: "ja¬∑la", translation: "Water", category: "Elements", romanized: "jala", ipa: "/dÕ° í…ôl…ô/", context: "Sacred element; rivers are worshipped as goddesses in Hinduism."},
                    {word: "‡§Ö‡§®‡•ç‡§®", pronunciation: "[an-na]", phonetic: "an¬∑na", translation: "Food/Grain", category: "Food", romanized: "anna", ipa: "/…ônna/", context: "Food is considered sacred; 'Annam Brahma' - food is divine."},
                    {word: "‡§ó‡•É‡§π", pronunciation: "[gri-ha]", phonetic: "gri¬∑ha", translation: "Home", category: "Places", romanized: "griha", ipa: "/g…æiha/", context: "Sacred space where family traditions are maintained and passed on."}
                ],
                intermediate: [
                    {word: "‡§™‡•ç‡§∞‡•á‡§Æ", pronunciation: "[pre-ma]", phonetic: "pre¬∑ma", translation: "Divine Love", category: "Emotions", romanized: "prema", ipa: "/preÀêma/", context: "Pure, selfless love; the highest form of emotion in spiritual practice."},
                    {word: "‡§ï‡§æ‡§≤", pronunciation: "[kaa-la]", phonetic: "kaa¬∑la", translation: "Time", category: "Philosophy", romanized: "kaala", ipa: "/kaÀêla/", context: "Time as cosmic principle; also represents death and transformation."},
                    {word: "‡§ï‡•Å‡§ü‡•Å‡§Æ‡•ç‡§¨", pronunciation: "[ku-tum-ba]", phonetic: "ku¬∑tum¬∑ba", translation: "Family", category: "Relations", romanized: "kutumba", ipa: "/ku àumba/", context: "Extended family; basis of 'Vasudhaiva Kutumbakam' - world is one family."},
                    {word: "‡§∂‡§ø‡§∑‡•ç‡§Ø", pronunciation: "[shish-ya]", phonetic: "shish¬∑ya", translation: "Disciple", category: "Education", romanized: "shishya", ipa: "/ Éi Çja/", context: "Student in guru-shishya tradition; learning through service and devotion."},
                    {word: "‡§ó‡•Å‡§∞‡•Å", pronunciation: "[gu-ru]", phonetic: "gu¬∑ru", translation: "Teacher/Master", category: "Education", romanized: "guru", ipa: "/gu…æu/", context: "Spiritual teacher; 'Gu' means darkness, 'Ru' means light - one who removes ignorance."},
                    {word: "‡§µ‡•à‡§¶‡•ç‡§Ø", pronunciation: "[vai-dya]", phonetic: "vai¬∑dya", translation: "Physician", category: "Professions", romanized: "vaidya", ipa: "/vaidÃ™ja/", context: "Traditional healer; Ayurveda practitioners who treat body, mind, and spirit."},
                    {word: "‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞", pronunciation: "[shaas-tra]", phonetic: "shaas¬∑tra", translation: "Scripture", category: "Knowledge", romanized: "shaastra", ipa: "/ ÉaÀêstra/", context: "Sacred texts containing eternal wisdom and knowledge."},
                    {word: "‡§∏‡§Ç‡§ó‡•Ä‡§§", pronunciation: "[san-gee-ta]", phonetic: "san¬∑gee¬∑ta", translation: "Music", category: "Arts", romanized: "sangeeta", ipa: "/s…ô≈ãgiÀêtÃ™a/", context: "Sacred art form; classical music is considered a spiritual practice."}
                ],
                advanced: [
                    {word: "‡§¶‡§∞‡•ç‡§∂‡§®", pronunciation: "[dar-sha-na]", phonetic: "dar¬∑sha¬∑na", translation: "Philosophy", category: "Philosophy", romanized: "darshana", ipa: "/dÃ™ar Éana/", context: "Systems of Indian philosophy; literally means 'vision' or 'seeing truth'."},
                    {word: "‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø", pronunciation: "[sans-kri-ti]", phonetic: "sans¬∑kri¬∑ti", translation: "Culture", category: "Society", romanized: "sanskriti", ipa: "/s…ônsk…æitÃ™i/", context: "Refined culture; literally means 'perfectly formed' or 'well-cultured'."},
                    {word: "‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞", pronunciation: "[vyaa-paa-ra]", phonetic: "vyaa¬∑paa¬∑ra", translation: "Trade", category: "Economy", romanized: "vyaapaara", ipa: "/vjaÀêpaÀêra/", context: "Ancient trade traditions; India was center of global commerce."},
                    {word: "‡§∞‡§æ‡§ú‡§®‡•Ä‡§§‡§ø", pronunciation: "[raa-ja-nee-ti]", phonetic: "raa¬∑ja¬∑nee¬∑ti", translation: "Politics", category: "Governance", romanized: "raajaneetii", ipa: "/raÀêdÕ° íaniÀêtÃ™i/", context: "Science of governance; ancient texts like Arthashastra detail political philosophy."},
                    {word: "‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø", pronunciation: "[pra-kri-ti]", phonetic: "pra¬∑kri¬∑ti", translation: "Nature", category: "Philosophy", romanized: "prakriti", ipa: "/prak…æitÃ™i/", context: "Primordial nature; the creative force of the universe in Samkhya philosophy."},
                    {word: "‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä", pronunciation: "[tak-nee-kee]", phonetic: "tak¬∑nee¬∑kee", translation: "Technical", category: "Modern", romanized: "takneekee", ipa: "/tÃ™akniÀêkiÀê/", context: "Modern adaptation; Sanskrit evolves to include contemporary concepts."}
                ]
            }
        };

        // Stories data
        const stories = [
            {
                title: "The Wise Sage and the Arrogant Scholar",
                content: "Once upon a time, there was a great sage who lived in a simple ashram in the foothills of the Himalayas. A proud scholar visited him, speaking in complex Sanskrit verses to show his vast knowledge. The sage listened quietly, then offered him water in a broken clay pot. The scholar refused, saying 'I cannot drink from such a humble vessel.' The sage smiled and said, 'Knowledge, like water, takes the shape of its container. If the container is filled with pride, even the purest knowledge becomes bitter.' The scholar realized his arrogance and bowed before the sage, asking to be his student.",
                moral: "True wisdom lies in humility. Knowledge without humility is like a lamp without oil - it cannot give light to others. As the ancient saying goes: '‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§¶‡§¶‡§æ‡§§‡§ø ‡§µ‡§ø‡§®‡§Ø‡§Ç' - Knowledge bestows humility."
            },
            {
                title: "The Banyan Tree and the Reed",
                content: "A mighty banyan tree stood proud in a field, boasting about its strength to a humble reed nearby. 'Look at me,' said the banyan, 'I am strong and mighty. You are so weak that even a gentle breeze can bend you.' The reed replied humbly, 'You are indeed strong, great tree.' One day, a fierce storm came. The proud banyan tree, refusing to bend, was uprooted by the powerful winds. But the humble reed, bending with the wind, survived the storm unharmed.",
                moral: "Flexibility and humility often triumph over rigid pride. Those who bend do not break. As Krishna says in the Gita: '‡§®‡§Æ‡•ç‡§∞‡§§‡§æ ‡§™‡§∞‡§Æ ‡§¨‡§≤ ‡§π‡•à' - Humility is the greatest strength."
            },
            {
                title: "The Student and the Master's Teaching",
                content: "A young student approached a learned master and said, 'I want to learn everything you know.' The master took him to a well and said, 'First, you must learn to draw water.' The student was disappointed, thinking this was too simple. For months, he drew water daily, growing frustrated. One day, he noticed that the rope had slowly worn a groove in the stone well. He understood: consistent practice, even of simple things, creates lasting change. He bowed to his master with newfound respect.",
                moral: "Great achievements come from consistent small efforts. Even water can cut through stone with persistence. '‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏‡•á‡§® ‡§§‡•Å ‡§ï‡•å‡§®‡•ç‡§§‡•á‡§Ø ‡§µ‡•à‡§∞‡§æ‡§ó‡•ç‡§Ø‡•á‡§£ ‡§ö ‡§ó‡•É‡§π‡•ç‡§Ø‡§§‡•á' - Through practice and detachment, all things can be achieved."
            }
        ];

        // Application state
        let currentLanguage = 'telugu';
        let currentDifficulty = 'beginner';
        let currentWordIndex = 0;
        let currentMode = 'learn';
        let currentStoryIndex = 0;
        let isAutoplay = false;
        let autoplayInterval;
        let speechRate = 0.7;

        // Statistics
        let stats = {
            wordsLearned: 0,
            correctAnswers: 0,
            totalAnswers: 0,
            streak: 0
        };

        // Initialize the app
        function initializeApp() {
            setupEventListeners();
            updateDisplay();
            updateStats();
            loadProgress();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Language selector
            document.getElementById('language').addEventListener('change', function() {
                currentLanguage = this.value;
                currentWordIndex = 0;
                updateDisplay();
                updateProgress();
            });

            // Difficulty selector
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentDifficulty = this.dataset.level;
                    currentWordIndex = 0;
                    updateDisplay();
                    updateProgress();
                });
            });

            // Mode selector
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentMode = this.dataset.mode;
                    switchMode(currentMode);
                });
            });

            // Speed slider
            document.getElementById('speedSlider').addEventListener('input', function() {
                speechRate = parseFloat(this.value);
            });

            // Quiz input
            document.getElementById('answerInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        }

        // Switch between modes
        function switchMode(mode) {
            document.getElementById('learnMode').classList.add('hidden');
            document.getElementById('quizMode').classList.add('hidden');
            document.getElementById('storyMode').classList.add('hidden');

            switch(mode) {
                case 'learn':
                    document.getElementById('learnMode').classList.remove('hidden');
                    updateDisplay();
                    break;
                case 'quiz':
                    document.getElementById('quizMode').classList.remove('hidden');
                    setupQuiz();
                    break;
                case 'story':
                    document.getElementById('storyMode').classList.remove('hidden');
                    displayStory();
                    break;
            }
        }

        // Update word display
        function updateDisplay() {
            const words = vocabularyData[currentLanguage][currentDifficulty];
            if (!words || words.length === 0) return;

            const word = words[currentWordIndex];
            
            document.getElementById('foreignWord').textContent = word.word;
            document.getElementById('pronunciation').textContent = word.pronunciation;
            document.getElementById('phoneticGuide').textContent = `Break it down: ${word.phonetic}`;
            document.getElementById('englishWord').textContent = word.translation;
            document.getElementById('culturalContext').textContent = word.context;
            document.getElementById('wordCategory').textContent = word.category;

            // Hide translation and context by default
            document.getElementById('englishWord').style.display = 'none';
            document.getElementById('culturalContext').style.display = 'none';

            updateProgress();
        }

        // Next word function
        function nextWord() {
            const words = vocabularyData[currentLanguage][currentDifficulty];
            if (!words || words.length === 0) return;

            currentWordIndex = (currentWordIndex + 1) % words.length;
            updateDisplay();
            
            // Update stats
            stats.wordsLearned = Math.max(stats.wordsLearned, currentWordIndex + 1);
            updateStats();
            saveProgress();

            // Show achievement
            if (currentWordIndex === 0) {
                showAchievement("Completed all words! üéâ");
            }
        }

        // Speech function
        function speakWord() {
            const word = vocabularyData[currentLanguage][currentDifficulty][currentWordIndex];
            if (word && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word.romanized);
                utterance.rate = speechRate;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                // Try to use appropriate voice
                const voices = speechSynthesis.getVoices();
                const voice = voices.find(v => v.lang.includes('hi') || v.lang.includes('en'));
                if (voice) utterance.voice = voice;
                
                speechSynthesis.speak(utterance);
            }
        }

        // Slow speech function
        function speakSlow() {
            const word = vocabularyData[currentLanguage][currentDifficulty][currentWordIndex];
            if (word && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word.romanized);
                utterance.rate = 0.3;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            }
        }

        // Show translation
        function showTranslation() {
            const englishWord = document.getElementById('englishWord');
            englishWord.style.display = englishWord.style.display === 'none' ? 'block' : 'none';
        }

        // Show cultural context
        function showCulturalContext() {
            const context = document.getElementById('culturalContext');
            context.style.display = context.style.display === 'none' ? 'block' : 'none';
        }

        // Update progress bar
        function updateProgress() {
            const words = vocabularyData[currentLanguage][currentDifficulty];
            if (!words || words.length === 0) return;

            const progress = ((currentWordIndex + 1) / words.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        // Quiz functions
        function setupQuiz() {
            const words = vocabularyData[currentLanguage][currentDifficulty];
            if (!words || words.length === 0) return;

            const randomIndex = Math.floor(Math.random() * words.length);
            const word = words[randomIndex];
            
            document.getElementById('quizQuestion').textContent = 
                `What does "${word.word}" mean in English?`;
            document.getElementById('answerInput').value = '';
            
            // Store correct answer
            document.getElementById('answerInput').dataset.correctAnswer = word.translation.toLowerCase();
            
            // Hide feedback
            document.getElementById('feedback').classList.remove('show');
        }

        function checkAnswer() {
            const input = document.getElementById('answerInput');
            const feedback = document.getElementById('feedback');
            const userAnswer = input.value.toLowerCase().trim();
            const correctAnswer = input.dataset.correctAnswer;
            
            stats.totalAnswers++;
            
            if (userAnswer === correctAnswer || correctAnswer.includes(userAnswer)) {
                feedback.textContent = "Correct! Well done! üéâ";
                feedback.className = "feedback correct show";
                stats.correctAnswers++;
                stats.streak++;
                showAchievement("Correct Answer! üéØ");
            } else {
                feedback.textContent = `Incorrect. The correct answer is: ${correctAnswer}`;
                feedback.className = "feedback incorrect show";
                stats.streak = 0;
            }
            
            updateStats();
            saveProgress();
            
            // Setup next question after delay
            setTimeout(() => {
                setupQuiz();
            }, 2000);
        }

        // Story functions
        function displayStory() {
            const story = stories[currentStoryIndex];
            document.getElementById('storyTitle').textContent = story.title;
            document.getElementById('storyContent').textContent = story.content;
            document.getElementById('storyMoral').innerHTML = `<strong>Moral:</strong> ${story.moral}`;
        }

        function nextStory() {
            currentStoryIndex = (currentStoryIndex + 1) % stories.length;
            displayStory();
        }

        function speakStory() {
            const story = stories[currentStoryIndex];
            if ('speechSynthesis' in window) {
                const text = `${story.title}. ${story.content}. ${story.moral}`;
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // Autoplay function
        function toggleAutoplay() {
            isAutoplay = !isAutoplay;
            const btn = event.target;
            
            if (isAutoplay) {
                btn.textContent = '‚è∏Ô∏è Pause Auto';
                autoplayInterval = setInterval(() => {
                    nextWord();
                    setTimeout(speakWord, 500);
                }, 4000);
            } else {
                btn.textContent = '‚èØÔ∏è Auto Play';
                clearInterval(autoplayInterval);
            }
        }

        // Update statistics
        function updateStats() {
            document.getElementById('wordsLearned').textContent = stats.wordsLearned;
            document.getElementById('correctAnswers').textContent = stats.correctAnswers;
            document.getElementById('streak').textContent = stats.streak;
            
            const accuracy = stats.totalAnswers > 0 ? 
                Math.round((stats.correctAnswers / stats.totalAnswers) * 100) : 0;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        // Show achievement badge
        function showAchievement(message) {
            const badge = document.getElementById('achievementBadge');
            badge.textContent = message;
            badge.classList.add('show');
            
            setTimeout(() => {
                badge.classList.remove('show');
            }, 3000);
        }

        // Reset progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress?')) {
                currentWordIndex = 0;
                stats = { wordsLearned: 0, correctAnswers: 0, totalAnswers: 0, streak: 0 };
                updateDisplay();
                updateStats();
                saveProgress();
                showAchievement('Progress Reset! üîÑ');
            }
        }

        // Save and load progress
        function saveProgress() {
            const progressData = {
                currentLanguage,
                currentDifficulty,
                currentWordIndex,
                stats
            };
            // In a real app, this would save to a server or local storage
            console.log('Progress saved:', progressData);
        }

        function loadProgress() {
            // In a real app, this would load from a server or local storage
            console.log('Progress loaded');
        }

        function exportProgress() {
            const progressData = {
                language: currentLanguage,
                difficulty: currentDifficulty,
                wordsLearned: stats.wordsLearned,
                accuracy: stats.totalAnswers > 0 ? 
                    Math.round((stats.correctAnswers / stats.totalAnswers) * 100) : 0,
                streak: stats.streak,
                date: new Date().toLocaleDateString()
            };
            
            const dataStr = JSON.stringify(progressData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `gurukulam-progress-${new Date().getTime()}.json`;
            link.click();
            
            showAchievement('Progress Exported! üíæ');
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
